<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org" th:fragment="layout">
    <head>
        <meta charset="UTF-8">
        <title th:text="${pageTitle} ?: 'Controle Escolar IEFP'">Controle Escolar IEFP</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

        <!-- Estilo adicional -->
        <style>
            body {
                display: flex;
                min-height: 100vh;
                overflow-x: hidden;
            }

            .sidebar {
                width: 240px;
                background-color: #343a40;
                color: #fff;
            }

            .sidebar .nav-link {
                color: #adb5bd;
            }

            .sidebar .nav-link.active,
            .sidebar .nav-link:hover {
                background-color: #495057;
                color: #fff;
            }

            .main-content {
                flex-grow: 1;
                background-color: #f8f9fa;
                display: flex;
                flex-direction: column;
            }

            .main-header {
                background-color: #007bff;
                color: #fff;
                padding: 15px 20px;
            }

            footer {
                background-color: #e9ecef;
                padding: 10px;
                text-align: center;
            }
        </style>
    </head>

    <body>
        <!-- Sidebar -->
        <nav class="sidebar d-flex flex-column p-3" style="width: 240px; min-height: 100vh;">
            <h4 class="text-white text-center mb-4">Painel IEFP</h4>

            <!-- Links de menu -->
            <div class="nav flex-column">
                <a th:each="menu : ${menuItems}"
                   th:href="@{${menu.rota}}"
                   class="nav-link"
                   th:text="${menu.titulo}">Menu</a>
            </div>

            <!-- Espaço entre menu e botão -->
            <div class="mt-auto pt-4">
                <a th:href="@{/logout}" class="btn btn-danger w-100">Sair</a>
            </div>
        </nav>

        <!-- Conteúdo principal -->
        <div class="main-content">
            <!-- Cabeçalho -->
            <header class="main-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Sistema de Gestão Escolar</h5>
                <div>
                    <span th:text="'Perfil: ' + ${profile}">Perfil</span> |
                    <span th:text="${nickname}">Usuário</span>
                </div>
            </header>

            <!-- Conteúdo da página -->
            <main class="flex-fill p-4">
                <div th:insert="~{::mainContent}"></div>
            </main>

            <!-- Modais (fora do main!) -->
            <div th:insert="~{::modais}"></div>

            <!-- Rodapé -->
            <footer>
                <p class="mb-0">© 2025 Controle Escolar IEFP - Todos os direitos reservados</p>
            </footer>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
